import os
import random


ancho,alto = 60,70
M = [[0 for i in range(ancho)] for j in range(alto)]
M[3][1] = 1
M[3][2] = 1
M[3][3] = 1
M[2][3] = 1
M[1][2] = 1

M[2][32] = 1;M[2][33] = 1;M[2][34] = 1;M[2][34] = 1;M[2][35] = 1;M[2][36] = 1;M[2][37] = 1;M[2][38] = 1
M[3][31] = 1;M[3][32] = 1;M[3][34] = 1;M[3][35] = 1;M[3][36] = 1;M[3][37] = 1;M[3][38] = 1;M[3][39] = 1;M[3][40] = 1
M[4][31] = 1;M[4][32] = 1;M[4][33] = 1;M[4][34] = 1;M[4][35] = 1;M[4][36] = 1;M[4][37] = 1;M[4][38] = 1;M[4][39] = 1;M[4][40] = 1
M[5][31] = 1;M[5][32] = 1;M[5][33] = 1;M[5][34] = 1;M[5][35] = 1;M[5][36] = 1;M[5][37] = 1;M[5][38] = 1;M[5][39] = 1;M[5][40] = 1
M[6][31] = 1;M[6][32] = 1;M[6][33] = 1;M[6][34] = 1;M[6][35] = 1;M[6][36] = 1;M[6][37] = 1;M[6][38] = 1;M[6][39] = 1;M[6][40] = 1
M[7][31] = 1;M[7][32] = 1;M[7][33] = 1;M[7][34] = 1;M[7][35] = 1;M[7][36] = 1
M[8][31] = 1;M[8][32] = 1;M[8][33] = 1;M[8][34] = 1;M[8][35] = 1;M[8][36] = 1;M[8][37] = 1;M[8][38] = 1
M[9][30] = 1;M[9][31] = 1;M[9][32] = 1;M[9][33] = 1;M[9][34] = 1;M[9][35] = 1
M[10][21] = 1;M[10][29] = 1;M[10][30] = 1;M[10][31] = 1;M[10][32] = 1;M[10][33] = 1;M[10][34] = 1;M[10][35] = 1
M[11][21] = 1;M[11][28] = 1;M[11][29] = 1;M[11][30] = 1;M[11][31] = 1;M[11][32] = 1;M[11][33] = 1;M[11][34] = 1;M[11][35] = 1;M[11][36] = 1;M[11][37] = 1
M[12][21] = 1;M[12][22] = 1;M[12][27] = 1;M[12][28] = 1;M[12][29] = 1;M[12][30] = 1;M[12][31] = 1;M[12][32] = 1;M[12][33] = 1;M[12][34] = 1;M[12][35] = 1;M[12][37] = 1
M[13][21] = 1;M[13][22] = 1;M[13][23] = 1;M[13][26] = 1;M[13][27] = 1;M[13][28] = 1;M[13][29] = 1;M[13][30] = 1;M[13][31] = 1;M[13][32] = 1;M[13][33] = 1;M[13][34] = 1;M[13][35] = 1
M[14][21] = 1;M[14][22] = 1;M[14][23] = 1;M[14][24] = 1;M[14][25] = 1;M[14][26] = 1;M[14][27] = 1;M[14][28] = 1;M[14][29] = 1;M[14][30] = 1;M[14][31] = 1;M[14][32] = 1;M[14][33] = 1;M[14][34] = 1;M[14][35] = 1
M[15][21] = 1;M[15][22] = 1;M[15][23] = 1;M[15][24] = 1;M[15][25] = 1;M[15][26] = 1;M[15][27] = 1;M[15][28] = 1;M[15][29] = 1;M[15][30] = 1;M[15][31] = 1;M[15][32] = 1;M[15][33] = 1;M[15][34] = 1
M[16][22] = 1;M[16][23] = 1;M[16][24] = 1;M[16][25] = 1;M[16][26] = 1;M[16][27] = 1;M[16][28] = 1;M[16][29] = 1;M[16][30] = 1;M[16][31] = 1;M[16][32] = 1;M[16][33] = 1;M[16][34] = 1
M[17][23] = 1;M[17][24] = 1;M[17][25] = 1;M[17][26] = 1;M[17][27] = 1;M[17][28] = 1;M[17][29] = 1;M[17][30] = 1;M[17][31] = 1;M[17][32] = 1;M[17][33] = 1
M[18][24] = 1;M[18][25] = 1;M[18][26] = 1;M[18][27] = 1;M[18][28] = 1;M[18][29] = 1;M[18][30] = 1;M[18][31] = 1;M[18][32] = 1
M[19][25] = 1;M[19][26] = 1;M[19][27] = 1;M[19][28] = 1;M[19][29] = 1;M[19][30] = 1;M[19][31] = 1
M[20][26] = 1;M[20][27] = 1;M[20][28] = 1;M[20][30] = 1;M[20][31] = 1
M[21][26] = 1;M[21][27] = 1;M[21][31] = 1
M[22][26] = 1;M[22][31] = 1
M[23][26] = 1;M[23][27] = 1;M[23][31] = 1;M[23][32] = 1

''''
Dibujo dinosaurio chrome

M[2][52] = 1;M[2][53] = 1;M[2][54] = 1;M[2][54] = 1;M[2][55] = 1;M[2][56] = 1;M[2][57] = 1;M[2][58] = 1
M[3][51] = 1;M[3][52] = 1;M[3][54] = 1;M[3][55] = 1;M[3][56] = 1;M[3][57] = 1;M[3][58] = 1;M[3][59] = 1;M[3][60] = 1
M[4][51] = 1;M[4][52] = 1;M[4][53] = 1;M[4][54] = 1;M[4][55] = 1;M[4][56] = 1;M[4][57] = 1;M[4][58] = 1;M[4][59] = 1;M[4][60] = 1
M[5][51] = 1;M[5][52] = 1;M[5][53] = 1;M[5][54] = 1;M[5][55] = 1;M[5][56] = 1;M[5][57] = 1;M[5][58] = 1;M[5][59] = 1;M[5][60] = 1
M[6][51] = 1;M[6][52] = 1;M[6][53] = 1;M[6][54] = 1;M[6][55] = 1;M[6][56] = 1;M[6][57] = 1;M[6][58] = 1;M[6][59] = 1;M[6][60] = 1
M[6][51] = 1;M[6][52] = 1;M[6][53] = 1;M[6][54] = 1;M[6][55] = 1;M[6][56] = 1
M[7][51] = 1;M[7][52] = 1;M[7][53] = 1;M[7][54] = 1;M[7][55] = 1;M[7][56] = 1
M[8][51] = 1;M[8][52] = 1;M[8][53] = 1;M[8][54] = 1;M[8][55] = 1;M[8][56] = 1;M[8][57] = 1;M[8][58] = 1
M[9][50] = 1;M[9][51] = 1;M[9][52] = 1;M[9][53] = 1;M[9][54] = 1;M[9][55] = 1
M[10][41] = 1;M[10][49] = 1;M[10][50] = 1;M[10][51] = 1;M[10][52] = 1;M[10][53] = 1;M[10][54] = 1;M[10][55] = 1
M[11][41] = 1;M[11][48] = 1;M[11][49] = 1;M[11][50] = 1;M[11][51] = 1;M[11][52] = 1;M[11][53] = 1;M[11][54] = 1;M[11][55] = 1;M[11][56] = 1;M[11][57] = 1
M[12][41] = 1;M[12][42] = 1;M[12][47] = 1;M[12][48] = 1;M[12][49] = 1;M[12][50] = 1;M[12][51] = 1;M[12][52] = 1;M[12][53] = 1;M[12][54] = 1;M[12][55] = 1;M[12][57] = 1
M[13][41] = 1;M[13][42] = 1;M[13][43] = 1;M[13][46] = 1;M[13][47] = 1;M[13][48] = 1;M[13][49] = 1;M[13][50] = 1;M[13][51] = 1;M[13][52] = 1;M[13][53] = 1;M[13][54] = 1;M[13][55] = 1
M[14][41] = 1;M[14][42] = 1;M[14][43] = 1;M[14][44] = 1;M[14][45] = 1;M[14][46] = 1;M[14][47] = 1;M[14][48] = 1;M[14][49] = 1;M[14][50] = 1;M[14][51] = 1;M[14][52] = 1;M[14][53] = 1;M[14][54] = 1;M[14][55] = 1
M[15][41] = 1;M[15][42] = 1;M[15][43] = 1;M[15][44] = 1;M[15][45] = 1;M[15][46] = 1;M[15][47] = 1;M[15][48] = 1;M[15][49] = 1;M[15][50] = 1;M[15][51] = 1;M[15][52] = 1;M[15][53] = 1;M[15][54] = 1
M[16][42] = 1;M[16][43] = 1;M[16][44] = 1;M[16][45] = 1;M[16][46] = 1;M[16][47] = 1;M[16][48] = 1;M[16][49] = 1;M[16][50] = 1;M[16][51] = 1;M[16][52] = 1;M[16][53] = 1;M[16][54] = 1
M[17][43] = 1;M[17][44] = 1;M[17][45] = 1;M[17][46] = 1;M[17][47] = 1;M[17][48] = 1;M[17][49] = 1;M[17][50] = 1;M[17][51] = 1;M[17][52] = 1;M[17][53] = 1
M[18][44] = 1;M[18][45] = 1;M[18][46] = 1;M[18][47] = 1;M[18][48] = 1;M[18][49] = 1;M[18][50] = 1;M[18][51] = 1;M[18][52] = 1
M[19][45] = 1;M[19][46] = 1;M[19][47] = 1;M[19][48] = 1;M[19][49] = 1;M[19][50] = 1;M[19][51] = 1
M[20][46] = 1;M[20][47] = 1;M[20][48] = 1;M[20][50] = 1;M[20][51] = 1
M[21][46] = 1;M[21][47] = 1;M[21][51] = 1
M[22][46] = 1;M[22][51] = 1
M[23][46] = 1;M[23][47] = 1;M[23][51] = 1;M[23][52] = 1
'''


def graphic(num):
    image = open("./dibujo_%03d.pbm"%num,"w")
    image.write("P1 "+str(ancho)+" "+str(alto))
    for i in range(alto):
        for j in range(ancho):
            image.write(" "+str(M[i][j]))
    image.close

def rules(M):
    temp = [[0 for i in range(ancho)] for j in range(alto)]
    for i in range(alto):
        for j in range(ancho):
            # print("M[",i,"][",j,"]")
            '''
            x|x|x
            x|C|x
            L|A|R            
            '''           
            C= M[i][j]
            A= M[(i+1)%alto][j]
            L= M[(i+1)%alto][j-1]
            R= M[(i+1)%alto][(j+1)%ancho]

            if i!=alto-1:
                if C==1:
                    if A==0 : temp[i][j]=0;temp[(i+1)%alto][j]=1
                    else:
                        r = random.choice([L,R])
                        if r==R and R==0:temp[i][j]=0; temp[(i+1)%alto][(j+1)%ancho] = 1
                        elif r==L and L==0:temp[i][j]=0; temp[(i+1)%alto][j-1] = 1
                        else :temp[i][j] = 1
            elif i==alto-1: 
                if C==1:
                    temp[i][j] = 1
    return temp

for i in range(80):
    graphic(i)
    if i > 9:
        M =rules(M)


'''
Para unirlos se usa convert para crear el archivo .gif 
El programa esta hecho para ejecutarse en un entorno linux
Es necesario el programa Imagemagick 
'''
# os.system("convert -delay 200 dibujo_000.pbm animacion.jpg")
os.system("convert -delay 300 *pbm animacion.gif;rm *pbm")
#os.system("convert -delay 20 *pbm animacion.gif")
